# 1. Fresh conda env
conda create -n acraft310 python=3.10 -y
conda activate acraft310

# 2. Matching PyTorch stack (has torch.uint64)
pip install torch==2.5.1 torchvision==0.20.1 torchaudio==2.5.1 --extra-index-url https://download.pytorch.org/whl/cu121

# 3. Core dependencies
pip install setuptools wheel packaging
pip install flashy dora omegaconf einops julius soundfile tqdm

# 4. Compatible transformers + safetensors
pip install transformers==4.39.3 safetensors==0.3.3

# 5. Clone AudioCraft
git clone https://github.com/facebookresearch/audiocraft.git
cd audiocraft
pip install -e .

# 6. ffmpeg (needed for audio I/O)
sudo apt-get update && sudo apt-get install -y ffmpeg

# 1. Fresh conda env
conda create -n acraft310 python=3.10 -y
conda activate acraft310

# 2. Matching PyTorch stack (has torch.uint64)
pip install torch==2.5.1 torchvision==0.20.1 torchaudio==2.5.1 --extra-index-url https://download.pytorch.org/whl/cu121

# 3. Core dependencies
pip install setuptools wheel packaging
pip install flashy dora omegaconf einops julius soundfile tqdm

# 4. Compatible transformers + safetensors
pip install transformers==4.39.3 safetensors==0.3.3

# 5. Clone AudioCraft
git clone https://github.com/facebookresearch/audiocraft.git
cd audiocraft
pip install -e .

# 6. ffmpeg (needed for audio I/O)
sudo apt-get update && sudo apt-get install -y ffmpeg

restart the enviornment
source ~/miniconda3/etc/profile.d/conda.sh
conda activate acraft310
cd ~/audiocraft

这是对的
conda env create -f audiocraft_env.yml

Torch: 2.1.0+cu121 CUDA: 12.1
torchaudio: 2.1.0+cu121
torchvision: 0.16.0+cu121
audiocraft version: 1.4.0a2
xformers: 0.0.22.post7

 2. When You Want to Restart Later

  Option A: If environment still exists
  # Just reactivate
  conda activate py3.10
  cd ~/audiocraft

  Option B: If environment was deleted/lost
  # Recreate from the saved file
  conda env create -f /home/audiocraft/audiocraft_env.yml

  # The environment name is saved in the yml file (likely py3.10)
  conda activate py3.10
  cd ~/audiocraft

  3. Also Save Your LoRA Training Progress

  # Your LoRA adapter should already be saved at:
  ls -la /home/audiocraft/saved_models/lora_epoch94_r8_alpha16.pt

  # Optionally backup your training script and data paths
  cp -r "/home/audiocraft/lora fine tune" /home/audiocraft/lora_backup/

  4. Quick Restart Checklist

  When you resume later:
  # 1. Activate environment
  conda activate py3.10

  # 2. Navigate to audiocraft
  cd ~/audiocraft

  # 3. Test that your model still works
  python ~/audiocraft/smoke_gen.py

  # 4. Continue LoRA training if needed
  cd "/home/audiocraft/lora fine tune"
  python lora_train_jsonl.py

